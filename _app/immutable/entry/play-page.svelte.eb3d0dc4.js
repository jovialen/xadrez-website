import{S as M,i as U,s as B,k as A,q as L,l as O,m as S,r as V,h as $,n as y,K as F,b as x,G as E,H as se,u as te,J as q,I as ie,x as Be,a as C,y as N,c as R,z as j,A as P,g as _,v as G,f as Y,U as qt,_ as Ft,d as w,B as D,a0 as Gt,R as $e,a1 as Yt,a2 as zt,a3 as Ht,C as be,D as ve,E as ye,F as _e,a4 as ce,O as Jt,a5 as Xt,Q as re,M as Me,N as le,e as K,a6 as oe,w as Ue,a7 as qe,a8 as Fe,a9 as Kt}from"../chunks/index.7bf4d985.js";import{w as z}from"../chunks/index.bbce139b.js";import{C as Qt,n as Ge,__tla as Wt}from"../chunks/chessboard.53170f6a.js";import{s as Zt,e as er,t as tr,p as rr,__tla as or}from"../chunks/stores.57765c75.js";import{s as ue,c as ar,P as nr}from"../chunks/primary-icon.f1eff325.js";import{I as Ye,B as sr,S as ze}from"../chunks/secondary-icon.1aff5611.js";let He,ir=Promise.all([(()=>{try{return Wt}catch{}})(),(()=>{try{return or}catch{}})()]).then(async()=>{function Je(r){let e,t,o,a;return{c(){e=A("li"),t=L(r[1]),this.h()},l(n){e=O(n,"LI",{class:!0});var s=S(e);t=V(s,r[1]),s.forEach($),this.h()},h(){y(e,"class","tab svelte-pl3rwx"),F(e,"active",r[0])},m(n,s){x(n,e,s),E(e,t),o||(a=se(e,"click",r[2]),o=!0)},p(n,[s]){s&2&&te(t,n[1]),s&1&&F(e,"active",n[0])},i:q,o:q,d(n){n&&$(e),o=!1,a()}}}function Xe(r,e,t){let{active:o=!1}=e,{label:a=""}=e;function n(s){ie.call(this,r,s)}return r.$$set=s=>{"active"in s&&t(0,o=s.active),"label"in s&&t(1,a=s.label)},[o,a,n]}class Ke extends M{constructor(e){super(),U(this,e,Xe,Je,B,{active:0,label:1})}}function we(r,e,t){const o=r.slice();return o[3]=e[t],o[5]=t,o}function xe(r){let e,t;return e=new Ke({props:{label:r[3].label,active:r[1]===r[5]}}),e.$on("click",r[2](r[5])),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,a){const n={};a&1&&(n.label=o[3].label),a&2&&(n.active=o[1]===o[5]),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function Qe(r){let e,t,o,a,n,s,u=r[0],i=[];for(let h=0;h<u.length;h+=1)i[h]=xe(we(r,u,h));const c=h=>w(i[h],1,1,()=>{i[h]=null}),l=[r[0][r[1]].props];var f=r[0][r[1]].content;function p(h){let m={};for(let g=0;g<l.length;g+=1)m=$e(m,l[g]);return{props:m}}return f&&(n=Be(f,p())),{c(){e=A("div"),t=A("ul");for(let h=0;h<i.length;h+=1)i[h].c();o=C(),a=A("div"),n&&N(n.$$.fragment),this.h()},l(h){e=O(h,"DIV",{class:!0});var m=S(e);t=O(m,"UL",{class:!0});var g=S(t);for(let b=0;b<i.length;b+=1)i[b].l(g);g.forEach($),o=R(m),a=O(m,"DIV",{class:!0});var d=S(a);n&&j(n.$$.fragment,d),d.forEach($),m.forEach($),this.h()},h(){y(t,"class","flex pl-0 mb-0 border-b border-gray-300"),y(a,"class","rounded-b-lg border border-gray-300 border-t-0 p-4 grow"),y(e,"class","h-full flex flex-col")},m(h,m){x(h,e,m),E(e,t);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(t,null);E(e,o),E(e,a),n&&P(n,a,null),s=!0},p(h,[m]){if(m&7){u=h[0];let d;for(d=0;d<u.length;d+=1){const b=we(h,u,d);i[d]?(i[d].p(b,m),_(i[d],1)):(i[d]=xe(b),i[d].c(),_(i[d],1),i[d].m(t,null))}for(G(),d=u.length;d<i.length;d+=1)c(d);Y()}const g=m&3?qt(l,[Ft(h[0][h[1]].props)]):{};if(m&3&&f!==(f=h[0][h[1]].content)){if(n){G();const d=n;w(d.$$.fragment,1,0,()=>{D(d,1)}),Y()}f?(n=Be(f,p()),N(n.$$.fragment),_(n.$$.fragment,1),P(n,a,null)):n=null}else f&&n.$set(g)},i(h){if(!s){for(let m=0;m<u.length;m+=1)_(i[m]);n&&_(n.$$.fragment,h),s=!0}},o(h){i=i.filter(Boolean);for(let m=0;m<i.length;m+=1)w(i[m]);n&&w(n.$$.fragment,h),s=!1},d(h){h&&$(e),Gt(i,h),n&&D(n)}}}function We(r,e,t){let o=0;function a(s){return()=>{t(1,o=s)}}let{tabs:n=[]}=e;return r.$$set=s=>{"tabs"in s&&t(0,n=s.tabs)},[n,o,a]}class Ze extends M{constructor(e){super(),U(this,e,We,Qe,B,{tabs:0})}}function et(r){let e,t,o,a,n,s,u,i,c;return n=new Qt({props:{position:r[0],orientation:r[1],movable:r[2],onDrop:r[3],dropOffBoard:r[5],sparePieces:r[4],draggable:!0}}),n.$on("snapend",r[7]),n.$on("change",r[8]),i=new Ze({props:{tabs:r[6]}}),{c(){e=A("section"),t=A("div"),o=A("div"),a=A("div"),N(n.$$.fragment),s=C(),u=A("div"),N(i.$$.fragment),this.h()},l(l){e=O(l,"SECTION",{class:!0});var f=S(e);t=O(f,"DIV",{class:!0});var p=S(t);o=O(p,"DIV",{class:!0});var h=S(o);a=O(h,"DIV",{class:!0});var m=S(a);j(n.$$.fragment,m),m.forEach($),h.forEach($),s=R(p),u=O(p,"DIV",{class:!0});var g=S(u);j(i.$$.fragment,g),g.forEach($),p.forEach($),f.forEach($),this.h()},h(){y(a,"class","h-full aspect-square mx-auto"),y(o,"class","w-full md:w-auto md:min-w-[50%] max-h-[80vh]"),y(u,"class","w-full md:w-auto md:grow md:max-w-lg"),y(t,"class","flex flex-wrap md:flex-nowrap gap-4 justify-center"),y(e,"class","container mx-auto p-4 md:p-2")},m(l,f){x(l,e,f),E(e,t),E(t,o),E(o,a),P(n,a,null),E(t,s),E(t,u),P(i,u,null),c=!0},p(l,[f]){const p={};f&1&&(p.position=l[0]),f&2&&(p.orientation=l[1]),f&4&&(p.movable=l[2]),f&8&&(p.onDrop=l[3]),f&32&&(p.dropOffBoard=l[5]),f&16&&(p.sparePieces=l[4]),n.$set(p);const h={};f&64&&(h.tabs=l[6]),i.$set(h)},i(l){c||(_(n.$$.fragment,l),_(i.$$.fragment,l),c=!0)},o(l){w(n.$$.fragment,l),w(i.$$.fragment,l),c=!1},d(l){l&&$(e),D(n),D(i)}}}function tt(r,e,t){let{position:o=z(Zt())}=e,{orientation:a="white"}=e,{movable:n=(p,h)=>!0}=e,{onDrop:s=(p,h)=>{}}=e,{sparePieces:u=!1}=e,{dropOffBoard:i="snapback"}=e,{tabs:c=[]}=e;function l(p){ie.call(this,r,p)}function f(p){ie.call(this,r,p)}return r.$$set=p=>{"position"in p&&t(0,o=p.position),"orientation"in p&&t(1,a=p.orientation),"movable"in p&&t(2,n=p.movable),"onDrop"in p&&t(3,s=p.onDrop),"sparePieces"in p&&t(4,u=p.sparePieces),"dropOffBoard"in p&&t(5,i=p.dropOffBoard),"tabs"in p&&t(6,c=p.tabs)},[o,a,n,s,u,i,c,l,f]}class rt extends M{constructor(e){super(),U(this,e,tt,et,B,{position:0,orientation:1,movable:2,onDrop:3,sparePieces:4,dropOffBoard:5,tabs:6})}}function Ee(r){return Object.prototype.toString.call(r)==="[object Date]"}function fe(r,e){if(r===e||r!==r)return()=>r;const t=typeof r;if(t!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const o=e.map((a,n)=>fe(r[n],a));return a=>o.map(n=>n(a))}if(t==="object"){if(!r||!e)throw new Error("Object cannot be null");if(Ee(r)&&Ee(e)){r=r.getTime(),e=e.getTime();const n=e-r;return s=>new Date(r+s*n)}const o=Object.keys(e),a={};return o.forEach(n=>{a[n]=fe(r[n],e[n])}),n=>{const s={};return o.forEach(u=>{s[u]=a[u](n)}),s}}if(t==="number"){const o=e-r;return a=>r+a*o}throw new Error(`Cannot interpolate ${t} values`)}function ot(r,e={}){const t=z(r);let o,a=r;function n(s,u){if(r==null)return t.set(r=s),Promise.resolve();a=s;let i=o,c=!1,{delay:l=0,duration:f=400,easing:p=Ht,interpolate:h=fe}=$e($e({},e),u);if(f===0)return i&&(i.abort(),i=null),t.set(r=a),Promise.resolve();const m=Yt()+l;let g;return o=zt(d=>{if(d<m)return!0;c||(g=h(r,s),typeof f=="function"&&(f=f(r,s)),c=!0),i&&(i.abort(),i=null);const b=d-m;return b>f?(t.set(r=s),!1):(t.set(r=g(p(b/f))),!0)}),o.promise}return{set:n,update:(s,u)=>n(s(a,r),u),subscribe:t.subscribe}}function at(r){let e,t,o,a,n,s,u,i;return o=new Ye({props:{icon:r[0],size:"text-xl",color:"text-white"}}),{c(){e=A("div"),t=A("div"),N(o.$$.fragment),a=C(),n=A("div"),s=A("span"),u=L(r[1]),this.h()},l(c){e=O(c,"DIV",{class:!0});var l=S(e);t=O(l,"DIV",{class:!0});var f=S(t);j(o.$$.fragment,f),f.forEach($),a=R(l),n=O(l,"DIV",{class:!0});var p=S(n);s=O(p,"SPAN",{});var h=S(s);u=V(h,r[1]),h.forEach($),p.forEach($),l.forEach($),this.h()},h(){y(t,"class","mt-auto aspect-square h-8 bg-blue-600 p-1 rounded-lg flex justify-center items-center"),y(n,"class","max-w-full p-1 px-4 border border-gray-300 rounded-lg rounded-bl-none"),y(e,"class","flex gap-2 w-full")},m(c,l){x(c,e,l),E(e,t),P(o,t,null),E(e,a),E(e,n),E(n,s),E(s,u),i=!0},p(c,[l]){const f={};l&1&&(f.icon=c[0]),o.$set(f),(!i||l&2)&&te(u,c[1])},i(c){i||(_(o.$$.fragment,c),i=!0)},o(c){w(o.$$.fragment,c),i=!1},d(c){c&&$(e),D(o)}}}function nt(r,e,t){let{user_icon:o="fa-user"}=e,{message:a=""}=e;return r.$$set=n=>{"user_icon"in n&&t(0,o=n.user_icon),"message"in n&&t(1,a=n.message)},[o,a]}class st extends M{constructor(e){super(),U(this,e,nt,at,B,{user_icon:0,message:1})}}function it(r){let e,t,o,a,n,s;o=new Ye({props:{origin:r[1],icon:r[0],color:"text-inherit",size:"text-base"}});const u=r[5].default,i=be(u,r,r[7],null);return{c(){e=A("div"),t=A("div"),N(o.$$.fragment),a=C(),i&&i.c(),this.h()},l(c){e=O(c,"DIV",{class:!0});var l=S(e);t=O(l,"DIV",{class:!0});var f=S(t);j(o.$$.fragment,f),f.forEach($),a=R(l),i&&i.l(l),l.forEach($),this.h()},h(){y(t,"class","place-self-center"),y(e,"class",n="flex gap-2 "+r[3])},m(c,l){x(c,e,l),E(e,t),P(o,t,null),E(e,a),i&&i.m(e,null),s=!0},p(c,l){const f={};l&2&&(f.origin=c[1]),l&1&&(f.icon=c[0]),o.$set(f),i&&i.p&&(!s||l&128)&&ve(i,u,c,c[7],s?_e(u,c[7],l,null):ye(c[7]),null),(!s||l&8&&n!==(n="flex gap-2 "+c[3]))&&y(e,"class",n)},i(c){s||(_(o.$$.fragment,c),_(i,c),s=!0)},o(c){w(o.$$.fragment,c),w(i,c),s=!1},d(c){c&&$(e),D(o),i&&i.d(c)}}}function ct(r){let e,t;return e=new sr({props:{bg_color:r[2],text_color:r[3],border:r[4],$$slots:{default:[it]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,[a]){const n={};a&4&&(n.bg_color=o[2]),a&8&&(n.text_color=o[3]),a&16&&(n.border=o[4]),a&139&&(n.$$scope={dirty:a,ctx:o}),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function lt(r,e,t){let{$$slots:o={},$$scope:a}=e,{icon:n=""}=e,{origin:s="fa-solid"}=e,{bg_color:u="bg-blue-700 hover:bg-blue-800"}=e,{text_color:i="text-white"}=e,{border:c=""}=e;function l(f){ie.call(this,r,f)}return r.$$set=f=>{"icon"in f&&t(0,n=f.icon),"origin"in f&&t(1,s=f.origin),"bg_color"in f&&t(2,u=f.bg_color),"text_color"in f&&t(3,i=f.text_color),"border"in f&&t(4,c=f.border),"$$scope"in f&&t(7,a=f.$$scope)},[n,s,u,i,c,o,l,a]}class ut extends M{constructor(e){super(),U(this,e,lt,ct,B,{icon:0,origin:1,bg_color:2,text_color:3,border:4})}}function ft(r){let e,t,o,a,n,s,u;const i=r[6].default,c=be(i,r,r[5],null);return{c(){e=A("label"),c&&c.c(),t=C(),o=A("input"),this.h()},l(l){e=O(l,"LABEL",{for:!0,class:!0});var f=S(e);c&&c.l(f),f.forEach($),t=R(l),o=O(l,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),this.h()},h(){y(e,"for",r[4]),y(e,"class","block mb-2 text-sm font-medium text-gray-900"),y(o,"id",r[4]),y(o,"type","range"),y(o,"min",r[1]),y(o,"max",r[2]),y(o,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none"),o.disabled=a=!r[3],F(o,"cursor-pointer",r[3])},m(l,f){x(l,e,f),c&&c.m(e,null),x(l,t,f),x(l,o,f),ce(o,r[0]),n=!0,s||(u=[se(o,"change",r[7]),se(o,"input",r[7])],s=!0)},p(l,[f]){c&&c.p&&(!n||f&32)&&ve(c,i,l,l[5],n?_e(i,l[5],f,null):ye(l[5]),null),(!n||f&2)&&y(o,"min",l[1]),(!n||f&4)&&y(o,"max",l[2]),(!n||f&8&&a!==(a=!l[3]))&&(o.disabled=a),f&1&&ce(o,l[0]),(!n||f&8)&&F(o,"cursor-pointer",l[3])},i(l){n||(_(c,l),n=!0)},o(l){w(c,l),n=!1},d(l){l&&$(e),c&&c.d(l),l&&$(t),l&&$(o),s=!1,Jt(u)}}}function pt(r,e,t){let{$$slots:o={},$$scope:a}=e,n=Ge(),{min:s=0}=e,{max:u=10}=e,{value:i=0}=e,{enabled:c=!0}=e;function l(){i=Xt(this.value),t(0,i)}return r.$$set=f=>{"min"in f&&t(1,s=f.min),"max"in f&&t(2,u=f.max),"value"in f&&t(0,i=f.value),"enabled"in f&&t(3,c=f.enabled),"$$scope"in f&&t(5,a=f.$$scope)},[i,s,u,c,n,a,o,l]}class pe extends M{constructor(e){super(),U(this,e,pt,ft,B,{min:1,max:2,value:0,enabled:3})}}function dt(r){let e,t,o,a,n,s;const u=r[7].default,i=be(u,r,r[6],null);return{c(){e=A("label"),i&&i.c(),t=C(),o=A("input"),this.h()},l(c){e=O(c,"LABEL",{for:!0,class:!0});var l=S(e);i&&i.l(l),l.forEach($),t=R(c),o=O(c,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),this.h()},h(){y(e,"for",r[5]),y(e,"class","block mb-2 text-sm font-medium text-gray-900"),y(o,"id",r[5]),y(o,"type","text"),y(o,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),y(o,"placeholder",r[1]),o.required=r[2],o.readOnly=r[3],o.disabled=r[4]},m(c,l){x(c,e,l),i&&i.m(e,null),x(c,t,l),x(c,o,l),ce(o,r[0]),a=!0,n||(s=se(o,"input",r[8]),n=!0)},p(c,[l]){i&&i.p&&(!a||l&64)&&ve(i,u,c,c[6],a?_e(u,c[6],l,null):ye(c[6]),null),(!a||l&2)&&y(o,"placeholder",c[1]),(!a||l&4)&&(o.required=c[2]),(!a||l&8)&&(o.readOnly=c[3]),(!a||l&16)&&(o.disabled=c[4]),l&1&&o.value!==c[0]&&ce(o,c[0])},i(c){a||(_(i,c),a=!0)},o(c){w(i,c),a=!1},d(c){c&&$(e),i&&i.d(c),c&&$(t),c&&$(o),n=!1,s()}}}function ht(r,e,t){let{$$slots:o={},$$scope:a}=e,{value:n=""}=e,{placeholder:s=""}=e,{required:u=!1}=e,{readonly:i=!1}=e,{disabled:c=!1}=e,l=Ge();function f(){n=this.value,t(0,n)}return r.$$set=p=>{"value"in p&&t(0,n=p.value),"placeholder"in p&&t(1,s=p.placeholder),"required"in p&&t(2,u=p.required),"readonly"in p&&t(3,i=p.readonly),"disabled"in p&&t(4,c=p.disabled),"$$scope"in p&&t(6,a=p.$$scope)},[n,s,u,i,c,l,a,o,f]}class mt extends M{constructor(e){super(),U(this,e,ht,dt,B,{value:0,placeholder:1,required:2,readonly:3,disabled:4})}}function Ae(r){let e,t,o,a,n,s,u;return t=new st({props:{message:r[4],user_icon:"fa-laptop"}}),{c(){e=A("div"),N(t.$$.fragment),a=C(),n=A("div"),this.h()},l(i){e=O(i,"DIV",{class:!0});var c=S(e);j(t.$$.fragment,c),c.forEach($),a=R(i),n=O(i,"DIV",{class:!0}),S(n).forEach($),this.h()},h(){y(e,"class","min-h-fit w-full"),y(n,"class","divider svelte-6yjci8")},m(i,c){x(i,e,c),P(t,e,null),x(i,a,c),x(i,n,c),u=!0},p(i,c){const l={};c&16&&(l.message=i[4]),t.$set(l)},i(i){u||(_(t.$$.fragment,i),i&&Me(()=>{u&&(o||(o=le(e,ue,{},!0)),o.run(1))}),i&&Me(()=>{u&&(s||(s=le(n,ue,{},!0)),s.run(1))}),u=!0)},o(i){w(t.$$.fragment,i),i&&(o||(o=le(e,ue,{},!1)),o.run(0)),i&&(s||(s=le(n,ue,{},!1)),s.run(0)),u=!1},d(i){i&&$(e),D(t),i&&o&&o.end(),i&&$(a),i&&$(n),i&&s&&s.end()}}}function gt(r){let e;return{c(){e=L("-")},l(t){e=V(t,"-")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function $t(r){let e;return{c(){e=L("+")},l(t){e=V(t,"+")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function bt(r){let e,t,o,a=Math.abs(r[5]).toFixed(2)+"",n;function s(c,l){return c[5]>0?$t:gt}let u=s(r),i=u(r);return{c(){e=L(`Evaluation:\r
			`),t=A("span"),i.c(),o=C(),n=L(a),this.h()},l(c){e=V(c,`Evaluation:\r
			`),t=O(c,"SPAN",{class:!0});var l=S(t);i.l(l),o=R(l),n=V(l,a),l.forEach($),this.h()},h(){y(t,"class","px-2 rounded-lg svelte-6yjci8"),F(t,"white-lead",r[5]>0),F(t,"black-lead",r[5]<=0)},m(c,l){x(c,e,l),x(c,t,l),i.m(t,null),E(t,o),E(t,n)},p(c,l){u!==(u=s(c))&&(i.d(1),i=u(c),i&&(i.c(),i.m(t,o))),l&32&&a!==(a=Math.abs(c[5]).toFixed(2)+"")&&te(n,a),l&32&&F(t,"white-lead",c[5]>0),l&32&&F(t,"black-lead",c[5]<=0)},d(c){c&&$(e),c&&$(t),i.d()}}}function vt(r){let e;return{c(){e=L("FEN Position:")},l(t){e=V(t,"FEN Position:")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function Oe(r){let e,t;return e=new ut({props:{icon:"fa-chess",bg_color:"bg-gray-900 hover:bg-black",text_color:"text-white",$$slots:{default:[yt]},$$scope:{ctx:r}}}),e.$on("click",r[7]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,a){const n={};a&2048&&(n.$$scope={dirty:a,ctx:o}),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function yt(r){let e;return{c(){e=L("Play as Black")},l(t){e=V(t,"Play as Black")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function _t(r){let e;return{c(){e=L("Help me")},l(t){e=V(t,"Help me")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function Ie(r){let e,t,o,a,n;const s=[xt,wt],u=[];function i(c,l){return l&1&&(e=null),e==null&&(e=c[0].game_state()==="Playing"),e?0:1}return t=i(r,-1),o=u[t]=s[t](r),{c(){o.c(),a=K()},l(c){o.l(c),a=K()},m(c,l){u[t].m(c,l),x(c,a,l),n=!0},p(c,l){let f=t;t=i(c,l),t===f?u[t].p(c,l):(G(),w(u[f],1,1,()=>{u[f]=null}),Y(),o=u[t],o?o.p(c,l):(o=u[t]=s[t](c),o.c()),_(o,1),o.m(a.parentNode,a))},i(c){n||(_(o),n=!0)},o(c){w(o),n=!1},d(c){u[t].d(c),c&&$(a)}}}function wt(r){let e,t;return e=new nr({props:{icon:"fa-chess-board",$$slots:{default:[Et]},$$scope:{ctx:r}}}),e.$on("click",r[8]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,a){const n={};a&2048&&(n.$$scope={dirty:a,ctx:o}),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function xt(r){let e,t;return e=new ze({props:{icon:"fa-flag",$$slots:{default:[At]},$$scope:{ctx:r}}}),e.$on("click",r[8]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,a){const n={};a&2048&&(n.$$scope={dirty:a,ctx:o}),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function Et(r){let e;return{c(){e=L("New Game")},l(t){e=V(t,"New Game")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function At(r){let e;return{c(){e=L("Resign")},l(t){e=V(t,"Resign")},m(t,o){x(t,e,o)},d(t){t&&$(e)}}}function Se(r){let e=r[0].is_startpos(),t,o,a,n=!r[0].is_startpos(),s,u,i=e&&Oe(r);o=new ze({props:{icon:"fa-lightbulb",$$slots:{default:[_t]},$$scope:{ctx:r}}}),o.$on("click",r[9]);let c=n&&Ie(r);return{c(){i&&i.c(),t=C(),N(o.$$.fragment),a=C(),c&&c.c(),s=K()},l(l){i&&i.l(l),t=R(l),j(o.$$.fragment,l),a=R(l),c&&c.l(l),s=K()},m(l,f){i&&i.m(l,f),x(l,t,f),P(o,l,f),x(l,a,f),c&&c.m(l,f),x(l,s,f),u=!0},p(l,f){f&1&&(e=l[0].is_startpos()),e?i?(i.p(l,f),f&1&&_(i,1)):(i=Oe(l),i.c(),_(i,1),i.m(t.parentNode,t)):i&&(G(),w(i,1,1,()=>{i=null}),Y());const p={};f&2048&&(p.$$scope={dirty:f,ctx:l}),o.$set(p),f&1&&(n=!l[0].is_startpos()),n?c?(c.p(l,f),f&1&&_(c,1)):(c=Ie(l),c.c(),_(c,1),c.m(s.parentNode,s)):c&&(G(),w(c,1,1,()=>{c=null}),Y())},i(l){u||(_(i),_(o.$$.fragment,l),_(c),u=!0)},o(l){w(i),w(o.$$.fragment,l),w(c),u=!1},d(l){i&&i.d(l),l&&$(t),D(o,l),l&&$(a),c&&c.d(l),l&&$(s)}}}function Ot(r){let e,t,o,a,n,s,u,i,c,l,f,p=r[3],h,m=r[4]!==""&&Ae(r);a=new pe({props:{min:-30,max:30,value:r[5],enabled:!1,$$slots:{default:[bt]},$$scope:{ctx:r}}}),s=new mt({props:{value:r[3],readonly:!0,$$slots:{default:[vt]},$$scope:{ctx:r}}});let g=Se(r);return{c(){e=A("div"),m&&m.c(),t=C(),o=A("div"),N(a.$$.fragment),n=C(),N(s.$$.fragment),u=C(),i=A("div"),c=C(),l=A("div"),f=A("div"),g.c(),this.h()},l(d){e=O(d,"DIV",{class:!0});var b=S(e);m&&m.l(b),t=R(b),o=O(b,"DIV",{class:!0});var I=S(o);j(a.$$.fragment,I),n=R(I),j(s.$$.fragment,I),I.forEach($),u=R(b),i=O(b,"DIV",{class:!0}),S(i).forEach($),c=R(b),l=O(b,"DIV",{class:!0});var T=S(l);f=O(T,"DIV",{class:!0});var k=S(f);g.l(k),k.forEach($),T.forEach($),b.forEach($),this.h()},h(){y(o,"class","grow min-h-[10rem]"),y(i,"class","divider svelte-6yjci8"),y(f,"class","mx-auto w-fit flex gap-2"),y(l,"class","min-h-fit"),y(e,"class","body w-full h-full flex flex-col gap-4")},m(d,b){x(d,e,b),m&&m.m(e,null),E(e,t),E(e,o),P(a,o,null),E(o,n),P(s,o,null),E(e,u),E(e,i),E(e,c),E(e,l),E(l,f),g.m(f,null),h=!0},p(d,[b]){d[4]!==""?m?(m.p(d,b),b&16&&_(m,1)):(m=Ae(d),m.c(),_(m,1),m.m(e,t)):m&&(G(),w(m,1,1,()=>{m=null}),Y());const I={};b&32&&(I.value=d[5]),b&2080&&(I.$$scope={dirty:b,ctx:d}),a.$set(I);const T={};b&8&&(T.value=d[3]),b&2048&&(T.$$scope={dirty:b,ctx:d}),s.$set(T),b&8&&B(p,p=d[3])?(G(),w(g,1,1,q),Y(),g=Se(d),g.c(),_(g,1),g.m(f,null)):g.p(d,b)},i(d){h||(_(m),_(a.$$.fragment,d),_(s.$$.fragment,d),_(g),h=!0)},o(d){w(m),w(a.$$.fragment,d),w(s.$$.fragment,d),w(g),h=!1},d(d){d&&$(e),m&&m.d(),D(a),D(s),g.d(d)}}}let It=3e3;function St(r,e,t){let o,a=q,n=()=>(a(),a=oe(m,k=>t(10,o=k)),m),s,u=q,i=()=>(u(),u=oe(h,k=>t(3,s=k)),h),c,l=q,f=()=>(l(),l=oe(g,k=>t(4,c=k)),g),p;r.$$.on_destroy.push(()=>a()),r.$$.on_destroy.push(()=>u()),r.$$.on_destroy.push(()=>l());let{position:h}=e;i();let{orientation:m}=e;n();let{message:g}=e;f();let d=ot(0,{duration:200,easing:ar});re(r,d,k=>t(5,p=k));function b(){h.make_move("e2e4"),m.set("black"),g.set("I always like to start with e2e4")}function I(){h.reset(),g.set("Want to play again?"),m.set("white")}function T(){o[0]===h.side_to_move()&&(g.set("Sure! I'll help!"),h.search(It).then(k=>{g.set(`I think that ${k} is a good move for you!`)}))}return r.$$set=k=>{"position"in k&&i(t(0,h=k.position)),"orientation"in k&&n(t(1,m=k.orientation)),"message"in k&&f(t(2,g=k.message))},r.$$.update=()=>{r.$$.dirty&8&&d.set(er(s))},[h,m,g,s,c,p,d,b,I,T]}class kt extends M{constructor(e){super(),U(this,e,St,Ot,B,{position:0,orientation:1,message:2})}}function Nt(r){let e,t,o=(r[5]/1e3).toFixed(2)+"",a,n;return{c(){e=L("Max search time: "),t=A("span"),a=L(o),n=L(" seconds")},l(s){e=V(s,"Max search time: "),t=O(s,"SPAN",{});var u=S(t);a=V(u,o),n=V(u," seconds"),u.forEach($)},m(s,u){x(s,e,u),x(s,t,u),E(t,a),E(t,n)},p(s,u){u&32&&o!==(o=(s[5]/1e3).toFixed(2)+"")&&te(a,o)},d(s){s&&$(e),s&&$(t)}}}function Pt(r){let e,t,o,a;return{c(){e=L("Max search depth: "),t=A("span"),o=L(r[4]),a=L(" moves")},l(n){e=V(n,"Max search depth: "),t=O(n,"SPAN",{});var s=S(t);o=V(s,r[4]),a=V(s," moves"),s.forEach($)},m(n,s){x(n,e,s),x(n,t,s),E(t,o),E(t,a)},p(n,s){s&16&&te(o,n[4])},d(n){n&&$(e),n&&$(t)}}}function Dt(r){let e,t,o,a,n,s;function u(f){r[6](f)}let i={min:1e3,max:1e4,$$slots:{default:[Nt]},$$scope:{ctx:r}};r[2]!==void 0&&(i.value=r[2]),e=new pe({props:i}),Ue.push(()=>qe(e,"value",u));function c(f){r[7](f)}let l={min:1,max:30,$$slots:{default:[Pt]},$$scope:{ctx:r}};return r[3]!==void 0&&(l.value=r[3]),a=new pe({props:l}),Ue.push(()=>qe(a,"value",c)),{c(){N(e.$$.fragment),o=C(),N(a.$$.fragment)},l(f){j(e.$$.fragment,f),o=R(f),j(a.$$.fragment,f)},m(f,p){P(e,f,p),x(f,o,p),P(a,f,p),s=!0},p(f,[p]){const h={};p&288&&(h.$$scope={dirty:p,ctx:f}),!t&&p&4&&(t=!0,h.value=f[2],Fe(()=>t=!1)),e.$set(h);const m={};p&272&&(m.$$scope={dirty:p,ctx:f}),!n&&p&8&&(n=!0,m.value=f[3],Fe(()=>n=!1)),a.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a.$$.fragment,f),s=!0)},o(f){w(e.$$.fragment,f),w(a.$$.fragment,f),s=!1},d(f){D(e,f),f&&$(o),D(a,f)}}}function Lt(r,e,t){let o,a=q,n=()=>(a(),a=oe(l,g=>t(4,o=g)),l),s,u=q,i=()=>(u(),u=oe(c,g=>t(5,s=g)),c);r.$$.on_destroy.push(()=>a()),r.$$.on_destroy.push(()=>u());let{searchTime:c=z(3e3)}=e;i();let{searchDepth:l=z(20)}=e;n();let f=s,p=o;function h(g){f=g,t(2,f)}function m(g){p=g,t(3,p)}return r.$$set=g=>{"searchTime"in g&&i(t(0,c=g.searchTime)),"searchDepth"in g&&n(t(1,l=g.searchDepth))},r.$$.update=()=>{r.$$.dirty&15&&(c.set(f),l.set(p))},[c,l,f,p,o,s,h,m]}class Vt extends M{constructor(e){super(),U(this,e,Lt,Dt,B,{searchTime:0,searchDepth:1})}}var de=function(r,e){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])},de(r,e)},ae=function(){return ae=Object.assign||function(r){for(var e,t=1,o=arguments.length;t<o;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r},ae.apply(this,arguments)};function ke(r,e,t){if(t||arguments.length===2)for(var o,a=0,n=e.length;a<n;a++)!o&&a in e||(o||(o=Array.prototype.slice.call(e,0,a)),o[a]=e[a]);return r.concat(o||Array.prototype.slice.call(e))}var Ne=function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return function(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function a(){this.constructor=t}de(t,o),t.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}(e,r),e}(Error),Pe={},jt=new Set,Q={};function W(r,e){if(typeof r=="string"||typeof r=="number"&&!isNaN(r)&&Math.abs(r)!==1/0||r==null||typeof r=="boolean")return r;var t=e.indexOf(r);if(t!==-1)return"#$@__instance__"+t;e.push(r);var o=e.length-1;if(r.constructor===Array){var a=r.map(function(i){return W(i,e)});return a.unshift("#$@__reference__"+o),a}if(r.constructor===Object){var n=Object.fromEntries(Object.entries(r).map(function(i){return[i[0],W(i[1],e)]}));return n["#$@__reference__"]=o,n}jt.add(r.constructor);var s={};s=Object.defineProperty(s,"#$@__constructor__",{value:r.constructor.name,enumerable:!0}),s=Object.defineProperty(s,"#$@__reference__",{value:o,enumerable:!0});var u=function(i,c){if(Object.keys(Q).includes(i.constructor.name))return Q[i.constructor.name].toPlain(i,function(l){return W(l,c)})}(r,e);return u!==void 0?ae(ae({},u),s):(Object.getOwnPropertyNames(r).forEach(function(i){Object.defineProperty(s,i,{value:W(r[i],e),enumerable:!0})}),s)}function Z(r,e,t){var o;if(typeof r=="string"&&r.indexOf("#$@__instance__")===0)return t[u=parseInt(r.slice(15))];if(typeof r=="string"||typeof r=="number"||r==null||typeof r=="boolean")return r;if(r.constructor===Array){if(r.length===0)return[];var a=r.shift();if(typeof a!="string"||a.substring(0,16)!=="#$@__reference__"){if(Object.keys(t).length===0)return r.unshift(a),r;throw new Ne}var n=[];t[u=a.slice(16)]=n;for(var s=0;s<r.length;s++)n[s]=Z(r[s],e,t);return n}if(r.constructor===Object){var u;if((u=(o=r["#$@__reference__"])!==null&&o!==void 0?o:null)===null){if(Object.keys(t).length===0)return r;throw new Ne}if(delete r["#$@__reference__"],!Object.keys(r).includes("#$@__constructor__")){for(var i in n={},t[u]=n,r)n[i]=Z(r[i],e,t);return n}var c=r["#$@__constructor__"];delete r["#$@__constructor__"];var l=function(p,h,m,g){if(Object.keys(Q).includes(h))return Q[h].fromPlain(p,function(d){return Z(d,m,g)})}(r,c,e,t);if(l!==void 0)return l;if(!Object.keys(e).includes(c))throw new Error("The class "+c+" is not allowed");var f={};for(var i in t[u]=f,r)f[i]=Z(r[i],e,t);return Object.setPrototypeOf(f,e[c].prototype),f}}function Ct(r){Pe[r.name]=r}(function(r,e){r("Date",t=>({time:t.getTime()}),function(t){let o=new Date;return o.setTime(t.time),o}),r("BigInt",t=>({number:t.toString()}),t=>BigInt(t.number)),r("String",t=>({text:t.toString()}),t=>new String(t.text)),r("RegExp",t=>({source:t.source,flags:t.flags}),t=>new RegExp(t.source,t.flags)),r("Number",function(t){let o={nan:!1,infinity:!1,positive:!0,number:null};return Math.abs(t)===1/0?(o.infinity=!0,o.positive=Math.abs(t)===t,o):isNaN(t)?(o.nan=!0,o):(o.number=t.valueOf(),o)},function(t){return t.nan?NaN:t.infinity?1/0*(t.positive?1:-1):new Number(t.number)}),r("Map",(t,o)=>({data:Array.from(t.entries()).map(a=>o(a))}),function(t,o){const a=new Map;return t.data.map(n=>o(n)).forEach(([n,s])=>a.set(n,s)),a}),r("Set",(t,o)=>({data:Array.from(t.values()).map(a=>o(a))}),function(t,o){const a=new Set;return t.data.map(n=>o(n)).forEach(n=>a.add(n)),a}),r("ArrayBuffer",(t,o)=>({data:o(new Uint8Array(t))}),(t,o)=>o(t.data).buffer),r("DataView",(t,o)=>({buffer:o(t.buffer),offset:t.byteOffset,length:t.byteLength}),(t,o)=>new DataView(o(t.buffer),t.offset,t.length)),[Error,EvalError,RangeError,AggregateError,ReferenceError,SyntaxError,TypeError,URIError,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array].forEach(t=>e(t))})(function(r,e,t){Q[r]={toPlain:e,fromPlain:t}},Ct);var H,ne={};function J(r){let e,t=r[0],o=1;for(;o<r.length;){const a=r[o],n=r[o+1];if(o+=2,(a==="optionalAccess"||a==="optionalCall")&&t==null)return;a==="access"||a==="optionalAccess"?(e=t,t=n(t)):a!=="call"&&a!=="optionalCall"||(t=n((...s)=>t.call(e,...s)),e=void 0)}return t}(H=ne).defaults={},H.set=function(r,e,t){var o=t||{},a=H.defaults,n=o.expires||a.expires,s=o.domain||a.domain,u=o.path!==void 0?o.path:a.path!==void 0?a.path:"/",i=o.secure!==void 0?o.secure:a.secure,c=o.httponly!==void 0?o.httponly:a.httponly,l=o.samesite!==void 0?o.samesite:a.samesite,f=n?new Date(typeof n=="number"?new Date().getTime()+864e5*n:n):0;document.cookie=r.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+e.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(f&&f.getTime()>=0?";expires="+f.toUTCString():"")+(s?";domain="+s:"")+(u?";path="+u:"")+(i?";secure":"")+(c?";httponly":"")+(l?";samesite="+l:"")},H.get=function(r){for(var e=document.cookie.split(";");e.length;){var t=e.pop(),o=t.indexOf("=");if(o=o<0?t.length:o,decodeURIComponent(t.slice(0,o).replace(/^\s+/,""))===r)return decodeURIComponent(t.slice(o+1))}return null},H.erase=function(r,e){H.set(r,"",{expires:-1,domain:e&&e.domain,path:e&&e.path,secure:0,httponly:0})},H.all=function(){for(var r={},e=document.cookie.split(";");e.length;){var t=e.pop(),o=t.indexOf("=");o=o<0?t.length:o,r[decodeURIComponent(t.slice(0,o).replace(/^\s+/,""))]=decodeURIComponent(t.slice(o+1))}return r};const De=[],he=r=>{(e=>{const t=typeof process<"u"&&J([process,"access",o=>o.env,"optionalAccess",o=>o.NODE_ENV])==="production";De.indexOf(e)!==-1||t||(typeof window>"u"&&(e+=`
Are you running on a server? Most of storages are not available while running on a server.`),console.warn(e),De.push(e))})(`Unable to find the ${r}. No data will be persisted.`)};let Le=function(r){return r===void 0?"undefined":JSON.stringify(W(r,[]))},me=function(r,e){if(e===void 0&&(e=void 0),typeof r!="string")return r;if(e===void 0&&(e={}),r!=="undefined"){e=Object.fromEntries(ke(ke([],Object.entries(e),!0),Object.entries(Pe),!0));try{return Z(JSON.parse(r),e,{})}catch{return r}}};function ee(r,e,t){const o=e.getValue(t);return o!==null&&r.set(o),e.addListener&&e.addListener(t,a=>{r.set(a)}),r.subscribe(a=>{e.setValue(t,a)}),{...r,delete(){e.deleteValue(t)}}}function Ve(){}function Rt(r=Ve,e=Ve){const t=[];return{callListeners(o,a){a!==void 0&&t.filter(({key:n})=>n===o).forEach(({listener:n})=>n(a))},addListener(o,a){t.push({key:o,listener:a}),t.length===1&&r()},removeListener(o,a){const n=t.indexOf({key:o,listener:a});n!==-1&&t.splice(n,1),t.length===0&&e()}}}Bt(),X(),Tt();function je(r,e=!1){const t=s=>{const u=s.key;s.storageArea===r&&a(u,me(s.newValue))},{removeListener:o,callListeners:a,addListener:n}=Rt(()=>{e&&typeof window<"u"&&J([window,"optionalAccess",s=>s.addEventListener])&&window.addEventListener("storage",t)},()=>{e&&typeof window<"u"&&J([window,"optionalAccess",s=>s.removeEventListener])&&window.removeEventListener("storage",t)});return{addListener:n,removeListener:o,getValue(s){const u=r.getItem(s);return me(u)},deleteValue(s){r.removeItem(s)},setValue(s,u){r.setItem(s,Le(u))}}}function X(r=!1){return typeof window<"u"&&J([window,"optionalAccess",e=>e.localStorage])?je(window.localStorage,r):(he("window.localStorage"),ge())}function Tt(r=!1){return typeof window<"u"&&J([window,"optionalAccess",e=>e.sessionStorage])?je(window.sessionStorage,r):(he("window.sessionStorage"),ge())}function Bt(){return typeof document>"u"||typeof J([document,"optionalAccess",r=>r.cookie])!="string"?(he("document.cookies"),ge()):{getValue(r){const e=ne.get(r);return me(e)},deleteValue(r){ne.erase(r,{samesite:"Strict"})},setValue(r,e){ne.set(r,Le(e),{samesite:"Strict"})}}}var Ce;function ge(){return{getValue:()=>null,deleteValue(){},setValue(){}}}(function(r){r[r.LOCAL=0]="LOCAL",r[r.SESSION=1]="SESSION",r[r.SYNC=2]="SYNC"})(Ce||(Ce={}));var Re,v={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(r){this.toString=function(){return"CORRUPT: "+this.message},this.message=r},invalid:function(r){this.toString=function(){return"INVALID: "+this.message},this.message=r},bug:function(r){this.toString=function(){return"BUG: "+this.message},this.message=r},notReady:function(r){this.toString=function(){return"NOT READY: "+this.message},this.message=r}}};v.cipher.aes=function(r){this._tables[0][0][0]||this._precompute();var e,t,o,a,n,s=this._tables[0][4],u=this._tables[1],i=r.length,c=1;if(i!==4&&i!==6&&i!==8)throw new v.exception.invalid("invalid aes key size");for(this._key=[a=r.slice(0),n=[]],e=i;e<4*i+28;e++)o=a[e-1],(e%i==0||i===8&&e%i==4)&&(o=s[o>>>24]<<24^s[o>>16&255]<<16^s[o>>8&255]<<8^s[255&o],e%i==0&&(o=o<<8^o>>>24^c<<24,c=c<<1^283*(c>>7))),a[e]=a[e-i]^o;for(t=0;e;t++,e--)o=a[3&t?e:e-4],n[t]=e<=4||t<4?o:u[0][s[o>>>24]]^u[1][s[o>>16&255]]^u[2][s[o>>8&255]]^u[3][s[255&o]]},v.cipher.aes.prototype={encrypt:function(r){return this._crypt(r,0)},decrypt:function(r){return this._crypt(r,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var r,e,t,o,a,n,s,u,i=this._tables[0],c=this._tables[1],l=i[4],f=c[4],p=[],h=[];for(r=0;r<256;r++)h[(p[r]=r<<1^283*(r>>7))^r]=r;for(e=t=0;!l[e];e^=o||1,t=h[t]||1)for(n=(n=t^t<<1^t<<2^t<<3^t<<4)>>8^255&n^99,l[e]=n,f[n]=e,u=16843009*p[a=p[o=p[e]]]^65537*a^257*o^16843008*e,s=257*p[n]^16843008*n,r=0;r<4;r++)i[r][e]=s=s<<24^s>>>8,c[r][n]=u=u<<24^u>>>8;for(r=0;r<5;r++)i[r]=i[r].slice(0),c[r]=c[r].slice(0)},_crypt:function(r,e){if(r.length!==4)throw new v.exception.invalid("invalid aes block size");var t,o,a,n,s=this._key[e],u=r[0]^s[0],i=r[e?3:1]^s[1],c=r[2]^s[2],l=r[e?1:3]^s[3],f=s.length/4-2,p=4,h=[0,0,0,0],m=this._tables[e],g=m[0],d=m[1],b=m[2],I=m[3],T=m[4];for(n=0;n<f;n++)t=g[u>>>24]^d[i>>16&255]^b[c>>8&255]^I[255&l]^s[p],o=g[i>>>24]^d[c>>16&255]^b[l>>8&255]^I[255&u]^s[p+1],a=g[c>>>24]^d[l>>16&255]^b[u>>8&255]^I[255&i]^s[p+2],l=g[l>>>24]^d[u>>16&255]^b[i>>8&255]^I[255&c]^s[p+3],p+=4,u=t,i=o,c=a;for(n=0;n<4;n++)h[e?3&-n:n]=T[u>>>24]<<24^T[i>>16&255]<<16^T[c>>8&255]<<8^T[255&l]^s[p++],t=u,u=i,i=c,c=l,l=t;return h}},v.bitArray={bitSlice:function(r,e,t){return r=v.bitArray._shiftRight(r.slice(e/32),32-(31&e)).slice(1),t===void 0?r:v.bitArray.clamp(r,t-e)},extract:function(r,e,t){var o=Math.floor(-e-t&31);return(-32&(e+t-1^e)?r[e/32|0]<<32-o^r[e/32+1|0]>>>o:r[e/32|0]>>>o)&(1<<t)-1},concat:function(r,e){if(r.length===0||e.length===0)return r.concat(e);var t=r[r.length-1],o=v.bitArray.getPartial(t);return o===32?r.concat(e):v.bitArray._shiftRight(e,o,0|t,r.slice(0,r.length-1))},bitLength:function(r){var e,t=r.length;return t===0?0:(e=r[t-1],32*(t-1)+v.bitArray.getPartial(e))},clamp:function(r,e){if(32*r.length<e)return r;var t=(r=r.slice(0,Math.ceil(e/32))).length;return e&=31,t>0&&e&&(r[t-1]=v.bitArray.partial(e,r[t-1]&2147483648>>e-1,1)),r},partial:function(r,e,t){return r===32?e:(t?0|e:e<<32-r)+1099511627776*r},getPartial:function(r){return Math.round(r/1099511627776)||32},equal:function(r,e){if(v.bitArray.bitLength(r)!==v.bitArray.bitLength(e))return!1;var t,o=0;for(t=0;t<r.length;t++)o|=r[t]^e[t];return o===0},_shiftRight:function(r,e,t,o){var a,n,s;for(o===void 0&&(o=[]);e>=32;e-=32)o.push(t),t=0;if(e===0)return o.concat(r);for(a=0;a<r.length;a++)o.push(t|r[a]>>>e),t=r[a]<<32-e;return n=r.length?r[r.length-1]:0,s=v.bitArray.getPartial(n),o.push(v.bitArray.partial(e+s&31,e+s>32?t:o.pop(),1)),o},_xor4:function(r,e){return[r[0]^e[0],r[1]^e[1],r[2]^e[2],r[3]^e[3]]},byteswapM:function(r){var e,t;for(e=0;e<r.length;++e)t=r[e],r[e]=t>>>24|t>>>8&65280|(65280&t)<<8|t<<24;return r}},v.codec.utf8String={fromBits:function(r){var e,t,o="",a=v.bitArray.bitLength(r);for(e=0;e<a/8;e++)!(3&e)&&(t=r[e/4]),o+=String.fromCharCode(t>>>8>>>8>>>8),t<<=8;return decodeURIComponent(escape(o))},toBits:function(r){r=unescape(encodeURIComponent(r));var e,t=[],o=0;for(e=0;e<r.length;e++)o=o<<8|r.charCodeAt(e),(3&e)==3&&(t.push(o),o=0);return 3&e&&t.push(v.bitArray.partial(8*(3&e),o)),t}},v.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(r,e,t){var o,a="",n=0,s=v.codec.base64._chars,u=0,i=v.bitArray.bitLength(r);for(t&&(s=s.substr(0,62)+"-_"),o=0;6*a.length<i;)a+=s.charAt((u^r[o]>>>n)>>>26),n<6?(u=r[o]<<6-n,n+=26,o++):(u<<=6,n-=6);for(;3&a.length&&!e;)a+="=";return a},toBits:function(r,e){r=r.replace(/\s|=/g,"");var t,o,a=[],n=0,s=v.codec.base64._chars,u=0;for(e&&(s=s.substr(0,62)+"-_"),t=0;t<r.length;t++){if((o=s.indexOf(r.charAt(t)))<0)throw new v.exception.invalid("this isn't base64!");n>26?(n-=26,a.push(u^o>>>n),u=o<<32-n):u^=o<<32-(n+=6)}return 56&n&&a.push(v.bitArray.partial(56&n,u,1)),a}},v.codec.base64url={fromBits:function(r){return v.codec.base64.fromBits(r,1,1)},toBits:function(r){return v.codec.base64.toBits(r,1)}},v.mode.gcm={name:"gcm",encrypt:function(r,e,t,o,a){var n,s=e.slice(0),u=v.bitArray;return a=a||128,o=o||[],n=v.mode.gcm._ctrMode(!0,r,s,o,t,a),u.concat(n.data,n.tag)},decrypt:function(r,e,t,o,a){var n,s,u=e.slice(0),i=v.bitArray,c=i.bitLength(u);if(o=o||[],(a=a||128)<=c?(s=i.bitSlice(u,c-a),u=i.bitSlice(u,0,c-a)):(s=u,u=[]),n=v.mode.gcm._ctrMode(!1,r,u,o,t,a),!i.equal(n.tag,s))throw new v.exception.corrupt("gcm: tag doesn't match");return n.data},_galoisMultiply:function(r,e){var t,o,a,n,s,u=v.bitArray._xor4;for(a=[0,0,0,0],n=e.slice(0),t=0;t<128;t++){for(r[Math.floor(t/32)]&1<<31-t%32&&(a=u(a,n)),s=(1&n[3])!=0,o=3;o>0;o--)n[o]=n[o]>>>1|(1&n[o-1])<<31;n[0]=n[0]>>>1,s&&(n[0]=n[0]^225<<24)}return a},_ghash:function(r,e,t){var o,a,n=t.length;for(o=e.slice(0),a=0;a<n;a+=4)o[0]^=4294967295&t[a],o[1]^=4294967295&t[a+1],o[2]^=4294967295&t[a+2],o[3]^=4294967295&t[a+3],o=v.mode.gcm._galoisMultiply(o,r);return o},_ctrMode:function(r,e,t,o,a,n){var s,u,i,c,l,f,p,h,m,g,d,b,I=v.bitArray;for(m=t.length,g=I.bitLength(t),d=I.bitLength(o),b=I.bitLength(a),s=e.encrypt([0,0,0,0]),b===96?(u=a.slice(0),u=I.concat(u,[1])):(u=v.mode.gcm._ghash(s,[0,0,0,0],a),u=v.mode.gcm._ghash(s,u,[0,0,Math.floor(b/4294967296),4294967295&b])),i=v.mode.gcm._ghash(s,[0,0,0,0],o),f=u.slice(0),p=i.slice(0),r||(p=v.mode.gcm._ghash(s,i,t)),l=0;l<m;l+=4)f[3]++,c=e.encrypt(f),t[l]^=c[0],t[l+1]^=c[1],t[l+2]^=c[2],t[l+3]^=c[3];return t=I.clamp(t,g),r&&(p=v.mode.gcm._ghash(s,i,t)),h=[Math.floor(d/4294967296),4294967295&d,Math.floor(g/4294967296),4294967295&g],p=v.mode.gcm._ghash(s,p,h),c=e.encrypt(u),p[0]^=c[0],p[1]^=c[1],p[2]^=c[2],p[3]^=c[3],{tag:I.bitSlice(p,0,n),data:t}}},function(r){r[r.EXCEPTION=0]="EXCEPTION",r[r.NO_ENCRYPTION=1]="NO_ENCRYPTION",r[r.NO_STORAGE=2]="NO_STORAGE"}(Re||(Re={}));function Te(r){let e,t;return e=new rt({props:{position:r[1],orientation:r[0],movable:r[6],onDrop:r[7],tabs:r[5]}}),e.$on("change",r[8]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,a){P(e,o,a),t=!0},p(o,a){const n={};a&1&&(n.orientation=o[0]),e.$set(n)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){w(e.$$.fragment,o),t=!1},d(o){D(e,o)}}}function Mt(r){let e=r[0],t,o,a=Te(r);return{c(){a.c(),t=K()},l(n){a.l(n),t=K()},m(n,s){a.m(n,s),x(n,t,s),o=!0},p(n,[s]){s&1&&B(e,e=n[0])?(G(),w(a,1,1,q),Y(),a=Te(n),a.c(),_(a,1),a.m(t.parentNode,t)):a.p(n,s)},i(n){o||(_(a),o=!0)},o(n){w(a),o=!1},d(n){n&&$(t),a.d(n)}}}function Ut(r,e,t){let o,a,n,s;tr.page("Play");let u=ee(rr(),X(),"savegame_fen");re(r,u,d=>t(9,o=d));let i=ee(z("white"),X(),"savegame_orientation");re(r,i,d=>t(0,a=d));let c=ee(z(""),X(),"savegame_message"),l=ee(z(3e3),X(),"savegame_searchTime");re(r,l,d=>t(11,s=d));let f=ee(z(20),X(),"savegame_searchDepth");re(r,f,d=>t(10,n=d));let p=[{label:"Game",content:kt,props:{message:c,position:u,orientation:i}},{label:"Settings",content:Vt,props:{searchTime:l,searchDepth:f}}];function h(d,b){if(u.game_state()!=="Playing"||b!==Kt(i))return!1;let I=u.side_to_move();if(I==="w"&&d.search(/^b/)!==-1||I==="b"&&d.search(/^w/)!==-1)return!1}function m(d,b){if(d!==b){if(!u.make_move(d,b))return"snapback";c.set(d+b),a[0]!==u.side_to_move()&&(c.set("Thinking of a move now"),u.search(s,n).then(I=>{u.make_move(I),c.set(`I think ${I} is the best move here!`)}))}}function g(){if(u.game_state()!=="Playing"){u.game_state()==="Checkmate"&&a[0]!==u.side_to_move()?c.set("Congratulations! You win, and I accept my loss. Can I get a rematch?"):c.set(u.game_state()+"!");return}}return r.$$.update=()=>{r.$$.dirty&512&&console.log(o)},[a,u,i,l,f,p,h,m,g,o]}He=class extends M{constructor(e){super(),U(this,e,Ut,Mt,B,{})}}});export{ir as __tla,He as default};
