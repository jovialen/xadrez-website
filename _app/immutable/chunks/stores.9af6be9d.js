import{w as W}from"./index.cb5b246f.js";import{a3 as y}from"./index.70a37df6.js";let O,B,p,F,Bn=(async()=>{const R=""+new URL("../assets/xadrez_bg.9a98bcf5.wasm",import.meta.url).href,C=async(n={},e)=>{let t;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(r,"base64");else if(typeof atob=="function"){const c=atob(r);o=new Uint8Array(c.length);for(let i=0;i<c.length;i++)o[i]=c.charCodeAt(i)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(o,n)}else{const r=await fetch(e),o=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(r,n);else{const c=await r.arrayBuffer();t=await WebAssembly.instantiate(c,n)}}return t.instance.exports};let _;function D(n){_=n}const I=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let U=new I("utf-8",{ignoreBOM:!0,fatal:!0});U.decode();let x=null;function A(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(_.memory.buffer)),x}function T(n,e){return U.decode(A().subarray(n,n+e))}const g=new Array(128).fill(void 0);g.push(void 0,null,!0,!1);let v=g.length;function a(n){v===g.length&&g.push(g.length+1);const e=v;return v=g[e],g[e]=n,e}function s(n){return g[n]}let u=0;const M=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let k=new M("utf-8");const X=typeof k.encodeInto=="function"?function(n,e){return k.encodeInto(n,e)}:function(n,e){const t=k.encode(n);return e.set(t),{read:n.length,written:t.length}};function b(n,e,t){if(t===void 0){const f=k.encode(n),m=e(f.length);return A().subarray(m,m+f.length).set(f),u=f.length,m}let r=n.length,o=e(r);const c=A();let i=0;for(;i<r;i++){const f=n.charCodeAt(i);if(f>127)break;c[o+i]=f}if(i!==r){i!==0&&(n=n.slice(i)),o=t(o,r,r=i+n.length*3);const f=A().subarray(o+i,o+r),m=X(n,f);i+=m.written}return u=i,o}function $(n){return n==null}let S=null;function d(){return(S===null||S.byteLength===0)&&(S=new Int32Array(_.memory.buffer)),S}function q(n){n<132||(g[n]=v,v=n)}function w(n){const e=s(n);return q(n),e}let j=null;function P(){return(j===null||j.byteLength===0)&&(j=new Float64Array(_.memory.buffer)),j}function E(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let c="[";o>0&&(c+=E(n[0]));for(let i=1;i<o;i++)c+=", "+E(n[i]);return c+="]",c}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}p=function(){const e=_.startpos();return w(e)};function J(n,e){const t=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),r=u,o=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),c=u,i=_.make_move(t,r,o,c);return w(i)}let L=null;function N(){return(L===null||L.byteLength===0)&&(L=new Uint32Array(_.memory.buffer)),L}function V(n,e){const t=N().subarray(n/4,n/4+e),r=[];for(let o=0;o<t.length;o++)r.push(w(t[o]));return r}function G(n,e,t){try{const i=_.__wbindgen_add_to_stack_pointer(-16),f=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),m=u;_.legal_moves(i,f,m,a(e),a(t));var r=d()[i/4+0],o=d()[i/4+1],c=V(r,o).slice();return _.__wbindgen_free(r,o*4),c}finally{_.__wbindgen_add_to_stack_pointer(16)}}function H(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=u,r=_.side_to_move(e,t);return w(r)}O=function(e){const t=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=u,o=_.evaluate(t,r);return w(o)};function K(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=u,r=_.game_state(e,t);return w(r)}function Q(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=u,c=_.search(r,o,a(e),a(t));return w(c)}function h(n,e){try{return n.apply(this,e)}catch(t){_.__wbindgen_exn_store(a(t))}}function Y(n,e){const t=T(n,e);return a(t)}function Z(n,e){const t=s(e),r=typeof t=="string"?t:void 0;var o=$(r)?0:b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),c=u;d()[n/4+1]=c,d()[n/4+0]=o}function nn(n){w(n)}function en(n){return a(n)}function tn(n,e){const t=s(e),r=typeof t=="number"?t:void 0;P()[n/8+1]=$(r)?0:r,d()[n/4+0]=!$(r)}function rn(){const n=new Error;return a(n)}function on(n,e){const t=s(e).stack,r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=u;d()[n/4+1]=o,d()[n/4+0]=r}function _n(n,e){try{console.error(T(n,e))}finally{_.__wbindgen_free(n,e)}}function cn(n){return s(n).now()}function an(n,e){const t=new Function(T(n,e));return a(t)}function ln(){return h(function(n,e){const t=Reflect.get(s(n),s(e));return a(t)},arguments)}function sn(){return h(function(n,e){const t=s(n).call(s(e));return a(t)},arguments)}function un(n){const e=s(n);return a(e)}function fn(){return h(function(){const n=self.self;return a(n)},arguments)}function bn(){return h(function(){const n=window.window;return a(n)},arguments)}function gn(){return h(function(){const n=globalThis.globalThis;return a(n)},arguments)}function dn(){return h(function(){const n=global.global;return a(n)},arguments)}function wn(n){return s(n)===void 0}function mn(n,e){const t=E(s(e)),r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=u;d()[n/4+1]=o,d()[n/4+0]=r}function yn(n,e){throw new Error(T(n,e))}URL=globalThis.URL;const l=await C({"./xadrez_bg.js":{__wbindgen_string_new:Y,__wbindgen_string_get:Z,__wbindgen_object_drop_ref:nn,__wbindgen_number_new:en,__wbindgen_number_get:tn,__wbg_new_abda76e883ba8a5f:rn,__wbg_stack_658279fe44541cf6:on,__wbg_error_f851667af71bcfc6:_n,__wbg_now_8172cd917e5eda6b:cn,__wbg_newnoargs_b5b063fc6c2f0376:an,__wbg_get_765201544a2b6869:ln,__wbg_call_97ae9d8645dc388b:sn,__wbindgen_object_clone_ref:un,__wbg_self_6d479506f72c6a71:fn,__wbg_window_f2557cc78490aceb:bn,__wbg_globalThis_7f206bda628d5286:gn,__wbg_global_ba75c50d1cf384f4:dn,__wbindgen_is_undefined:wn,__wbindgen_debug_string:mn,__wbindgen_throw:yn}},R),hn=l.memory,pn=l.make_move,vn=l.legal_moves,xn=l.side_to_move,An=l.evaluate,Tn=l.game_state,kn=l.search,Sn=l.wasm_main,jn=l.startpos,Ln=l.__wbindgen_malloc,$n=l.__wbindgen_realloc,En=l.__wbindgen_add_to_stack_pointer,On=l.__wbindgen_free,Un=l.__wbindgen_exn_store,z=l.__wbindgen_start,zn=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:En,__wbindgen_exn_store:Un,__wbindgen_free:On,__wbindgen_malloc:Ln,__wbindgen_realloc:$n,__wbindgen_start:z,evaluate:An,game_state:Tn,legal_moves:vn,make_move:pn,memory:hn,search:kn,side_to_move:xn,startpos:jn,wasm_main:Sn},Symbol.toStringTag,{value:"Module"}));D(zn),z();function Wn(){const{subscribe:n,set:e}=W("Xadrez");return{subscribe:n,set:e,empty:()=>e("Xadrez"),page:t=>e(`Xadrez - ${t}`)}}B=function(){const e=W(p());return{subscribe:e.subscribe,set:t=>{e.set(t)},reset:()=>{e.set(p())},startpos:()=>{e.set(p())},is_startpos:()=>y(e)===p(),make_move:(t,r="")=>{let o=y(e),c=J(o,t+r);return c===null?(console.log(t+r+" is an illegal move"),!1):(e.set(c),!0)},evaluate:()=>O(y(e)),side_to_move:()=>H(y(e)),game_state:()=>K(y(e)),legal_moves:(t=null,r=null)=>G(y(e),t,r),search:(t=1e3,r=null)=>new Promise((o,c)=>{setTimeout(()=>{o(Q(y(e),t,r))},500)})}},F=Wn()})();export{Bn as __tla,O as e,B as p,p as s,F as t};
