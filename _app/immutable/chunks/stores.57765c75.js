import{w as W}from"./index.bbce139b.js";import{a9 as y}from"./index.7bf4d985.js";let O,B,p,F,Bn=(async()=>{const R=""+new URL("../assets/xadrez_bg.034cd249.wasm",import.meta.url).href,C=async(n={},e)=>{let t;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let o;if(typeof Buffer=="function"&&typeof Buffer.from=="function")o=Buffer.from(r,"base64");else if(typeof atob=="function"){const i=atob(r);o=new Uint8Array(i.length);for(let c=0;c<i.length;c++)o[c]=i.charCodeAt(c)}else throw new Error("Cannot decode base64-encoded data URL");t=await WebAssembly.instantiate(o,n)}else{const r=await fetch(e),o=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&o.startsWith("application/wasm"))t=await WebAssembly.instantiateStreaming(r,n);else{const i=await r.arrayBuffer();t=await WebAssembly.instantiate(i,n)}}return t.instance.exports};let _;function q(n){_=n}const D=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let U=new D("utf-8",{ignoreBOM:!0,fatal:!0});U.decode();let A=null;function x(){return(A===null||A.byteLength===0)&&(A=new Uint8Array(_.memory.buffer)),A}function T(n,e){return U.decode(x().subarray(n,n+e))}const g=new Array(128).fill(void 0);g.push(void 0,null,!0,!1);let v=g.length;function a(n){v===g.length&&g.push(g.length+1);const e=v;return v=g[e],g[e]=n,e}function u(n){return g[n]}let f=0;const I=typeof TextEncoder>"u"?(0,module.require)("util").TextEncoder:TextEncoder;let k=new I("utf-8");const M=typeof k.encodeInto=="function"?function(n,e){return k.encodeInto(n,e)}:function(n,e){const t=k.encode(n);return e.set(t),{read:n.length,written:t.length}};function b(n,e,t){if(t===void 0){const s=k.encode(n),m=e(s.length);return x().subarray(m,m+s.length).set(s),f=s.length,m}let r=n.length,o=e(r);const i=x();let c=0;for(;c<r;c++){const s=n.charCodeAt(c);if(s>127)break;i[o+c]=s}if(c!==r){c!==0&&(n=n.slice(c)),o=t(o,r,r=c+n.length*3);const s=x().subarray(o+c,o+r),m=M(n,s);c+=m.written}return f=c,o}function $(n){return n==null}let j=null;function d(){return(j===null||j.byteLength===0)&&(j=new Int32Array(_.memory.buffer)),j}function P(n){n<132||(g[n]=v,v=n)}function w(n){const e=u(n);return P(n),e}let L=null;function X(){return(L===null||L.byteLength===0)&&(L=new Float64Array(_.memory.buffer)),L}function E(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let i="[";o>0&&(i+=E(n[0]));for(let c=1;c<o;c++)i+=", "+E(n[c]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}p=function(){const e=_.startpos();return w(e)};function J(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=f,i=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),c=f,s=_.make_move(r,o,i,c,t.codePointAt(0));return w(s)}let S=null;function N(){return(S===null||S.byteLength===0)&&(S=new Uint32Array(_.memory.buffer)),S}function V(n,e){const t=N().subarray(n/4,n/4+e),r=[];for(let o=0;o<t.length;o++)r.push(w(t[o]));return r}function G(n,e,t){try{const c=_.__wbindgen_add_to_stack_pointer(-16),s=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),m=f;_.legal_moves(c,s,m,a(e),a(t));var r=d()[c/4+0],o=d()[c/4+1],i=V(r,o).slice();return _.__wbindgen_free(r,o*4),i}finally{_.__wbindgen_add_to_stack_pointer(16)}}function H(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=f,r=_.side_to_move(e,t);return w(r)}O=function(e){const t=b(e,_.__wbindgen_malloc,_.__wbindgen_realloc),r=f,o=_.evaluate(t,r);return w(o)};function K(n){const e=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),t=f,r=_.game_state(e,t);return w(r)}function Q(n,e,t){const r=b(n,_.__wbindgen_malloc,_.__wbindgen_realloc),o=f,i=_.search(r,o,a(e),a(t));return w(i)}function h(n,e){try{return n.apply(this,e)}catch(t){_.__wbindgen_exn_store(a(t))}}function Y(n,e){const t=T(n,e);return a(t)}function Z(n,e){const t=u(e),r=typeof t=="string"?t:void 0;var o=$(r)?0:b(r,_.__wbindgen_malloc,_.__wbindgen_realloc),i=f;d()[n/4+1]=i,d()[n/4+0]=o}function nn(n){w(n)}function en(n){return a(n)}function tn(n,e){const t=u(e),r=typeof t=="number"?t:void 0;X()[n/8+1]=$(r)?0:r,d()[n/4+0]=!$(r)}function rn(){const n=new Error;return a(n)}function on(n,e){const t=u(e).stack,r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=f;d()[n/4+1]=o,d()[n/4+0]=r}function _n(n,e){try{console.error(T(n,e))}finally{_.__wbindgen_free(n,e)}}function cn(n){return u(n).now()}function an(n,e){const t=new Function(T(n,e));return a(t)}function ln(){return h(function(n,e){const t=Reflect.get(u(n),u(e));return a(t)},arguments)}function sn(){return h(function(n,e){const t=u(n).call(u(e));return a(t)},arguments)}function un(n){const e=u(n);return a(e)}function fn(){return h(function(){const n=self.self;return a(n)},arguments)}function bn(){return h(function(){const n=window.window;return a(n)},arguments)}function gn(){return h(function(){const n=globalThis.globalThis;return a(n)},arguments)}function dn(){return h(function(){const n=global.global;return a(n)},arguments)}function wn(n){return u(n)===void 0}function mn(n,e){const t=E(u(e)),r=b(t,_.__wbindgen_malloc,_.__wbindgen_realloc),o=f;d()[n/4+1]=o,d()[n/4+0]=r}function yn(n,e){throw new Error(T(n,e))}URL=globalThis.URL;const l=await C({"./xadrez_bg.js":{__wbindgen_string_new:Y,__wbindgen_string_get:Z,__wbindgen_object_drop_ref:nn,__wbindgen_number_new:en,__wbindgen_number_get:tn,__wbg_new_abda76e883ba8a5f:rn,__wbg_stack_658279fe44541cf6:on,__wbg_error_f851667af71bcfc6:_n,__wbg_now_8172cd917e5eda6b:cn,__wbg_newnoargs_b5b063fc6c2f0376:an,__wbg_get_765201544a2b6869:ln,__wbg_call_97ae9d8645dc388b:sn,__wbindgen_object_clone_ref:un,__wbg_self_6d479506f72c6a71:fn,__wbg_window_f2557cc78490aceb:bn,__wbg_globalThis_7f206bda628d5286:gn,__wbg_global_ba75c50d1cf384f4:dn,__wbindgen_is_undefined:wn,__wbindgen_debug_string:mn,__wbindgen_throw:yn}},R),hn=l.memory,pn=l.make_move,vn=l.legal_moves,An=l.side_to_move,xn=l.evaluate,Tn=l.game_state,kn=l.search,jn=l.wasm_main,Ln=l.startpos,Sn=l.__wbindgen_malloc,$n=l.__wbindgen_realloc,En=l.__wbindgen_add_to_stack_pointer,On=l.__wbindgen_free,Un=l.__wbindgen_exn_store,z=l.__wbindgen_start,zn=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:En,__wbindgen_exn_store:Un,__wbindgen_free:On,__wbindgen_malloc:Sn,__wbindgen_realloc:$n,__wbindgen_start:z,evaluate:xn,game_state:Tn,legal_moves:vn,make_move:pn,memory:hn,search:kn,side_to_move:An,startpos:Ln,wasm_main:jn},Symbol.toStringTag,{value:"Module"}));q(zn),z();function Wn(){const{subscribe:n,set:e}=W("Xadrez");return{subscribe:n,set:e,empty:()=>e("Xadrez"),page:t=>e(`Xadrez - ${t}`)}}B=function(e=p()){const t=W(e);return{subscribe:t.subscribe,set:r=>{t.set(r)},reset:()=>{t.set(p())},startpos:()=>{t.set(p())},is_startpos:()=>y(t)===p(),make_move:(r,o="")=>{let i=y(t),c=J(i,r+o,"q");return c===null?(console.log(r+o+" is an illegal move"),!1):(t.set(c),!0)},evaluate:()=>O(y(t)),side_to_move:()=>H(y(t)),game_state:()=>K(y(t)),legal_moves:(r=null,o=null)=>G(y(t),r,o),search:(r=1e3,o=null)=>new Promise((i,c)=>{setTimeout(()=>{i(Q(y(t),r,o))},500)})}},F=Wn()})();export{Bn as __tla,O as e,B as p,p as s,F as t};
